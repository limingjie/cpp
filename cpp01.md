#Hello World!

##Setup C++ Development Environment
- MinGW (http://nuwen.net/mingw.html)
  - GCC
  - Make
- Dependency Walker (http://www.dependencywalker.com/)
- UPX (http://upx.sourceforge.net/)

##lab01: Say Hello
- Single source file
  - `hello.cpp`
```c++
  #include <iostream>

  // Never using namespace globally
  // using namespace std;

  int main()
  {
      using namespace std;

      cout << "Hello World!\nPrint any key to continue..." << endl;
      cin.ignore();

      return 0;
  }
```
- Compile & Link
  - `$ g++ -o hello.exe hello.cpp`
- Run
  - `$ hello.exe`

##lab01: Complex Case
- Multiple source files
  - `block.h`
  - `block.cpp`
  - `board.h`
  - `board.cpp`
  - `unblock.cpp`
- Compile & Link
```
$ g++ -c -o unblock.o unblock.cpp
$ g++ -c -o block.o block.cpp
$ g++ -c -o board.o board.cpp
$ g++ -o unblock.exe unblock.o block.o board.o
```
- Run
  - `$ unblock.exe`

##Source File Conventions
- Header files `.h` `.hpp` `.hxx` `...`
  - Class definitions `class X { ... };`
  - Inline function definitions `inline int get_cpus() { ... }`
  - Function declarations `void help();`
  - Object declarations `extern int debug_enabled;`
- Source files `.cpp` `.cxx` `...`
  - Function definitions `void help() { ... }` `void X::f() { ... }`
  - Object definitions `int debug_enabled = 1;`

##Include Guard
```c++
  #ifndef __BOARD_H__
  #define __BOARD_H__

  #include "block.h"

  #endif // __BOARD_H__

```

##Compiler & Linker
###Compiler
- A compiler is a computer program (or set of programs) that transforms source code written in a programming language (the source language) into another computer language (the target language, often having a binary form known as object code).

![Image](https://github.com/limingjie/cpp/blob/master/images/Compiler.png?raw=true)

###Linker
- In computer science, a linker or link editor is a computer program that takes one or more object files generated by a compiler and combines them into a single executable program.

![Image](https://github.com/limingjie/cpp/blob/master/images/Linker.png?raw=true)

###Static linking vs dynamic linking
- Static linking
  - Easy to distribute
  - Fast Startup
  - Some license limitation
- Dynamic linking
  - Sharing resource
  - Small size

##Makefile
- GNU Make
  - `$ make`
  - `$ make -f filename`
- Basic Makefile
```
target: dependencies
[tab] command 1
...
[tab] command n
```
- Micros
```
MACRO = definition
```

##More Options of g++
- Warning
  - `-Wall`
- Assembly
  - `-s`
- Optimization
  - `-O1` `-O2` `-O3` `-Os`
- C++11
  - `-std=c++11`
- Include Additional Path for head files
  - `-I` `-Ipath`
- Include Additional Path for library
  - `-L` `-Lpath`
- Link to library
  - `-l` `-lstatic`
- Debug Information
  - `-g`

##Further Optimize Executable Size
- Optimization flags
  - `-O1` `-O2` `-O3` `-Os`
- Discards symbols
  - `$ strip -s hello.exe`
- UPX
  - `$ UPX -9 hello.exe`
  - `$ UPX --ultra-brute hello.exe`

##Deliver
- Debug build / Release build
- Dependencies
  - OS
  - Dynamic Libraries
